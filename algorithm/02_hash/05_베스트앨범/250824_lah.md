[![PRO]][Link]

## 문제 해석

- 1. 속한 노래가 많이 재생된 장르 / 2. 장르 내에서 많이 재생된 노래 / 3. 장르 내에서 재생횟수가 같은 노래 중에는 고유 번호가 낮은 노래를 수록 >> 순으로 베스트 앨범에 들어갈 노래의 고유 번호를 순서대로 return

## 최종 제출 코드

- 1. 장르별 총합을 담은 `maxGenre` / 장르별로 곡을 담은 `genreToSong`
- 2. `maxGenre`를 내림차순으로 정렬하여 재생횟수가 많은 순으로 정렬한 `soretedGenre`
- 3. 재생횟수가 많은 순으로 장르별 곡을 재생횟수별로 2개씩 추출해서 `answer`에 `push`

```js
function solution(genres, plays) {
  var answer = [];

  const maxGenre = new Map(); // Map(2) { 'classic' => 1450, 'pop' => 3100 }
  const genreToSong = new Map();
  // Map(2) {'classic' => [ { id: 0, play: 500 }, { id: 2, play: 150 }, { id: 3, play: 800 } ], 'pop' => [ { id: 1, play: 600 }, { id: 4, play: 2500 } ]}

  // maxGenre : 속한 노래가 많이 재생된 장르 찾기
  for (let i = 0; i < genres.length; i++) {
    maxGenre.set(genres[i], (maxGenre.get(genres[i]) || 0) + plays[i]);

    // genreToSong : 장르별 노래 리스트 저장
    if (!genreToSong.has(genres[i])) {
      genreToSong.set(genres[i], []);
    }
    genreToSong.get(genres[i]).push({ id: i, play: plays[i] });
  }

  // < 장르 내에서 많이 재생된 노래를 먼저 수록 >
  // 장르 별로 많이 재생된 순으로 정렬 후 장르 키값만 추출
  const sortedGenre = [...maxGenre.entries()] // [ 'pop', 'classic' ]
    .sort((a, b) => b[1] - a[1]) // 재생 순으로 정렬
    .map((entry) => entry[0]);

  for (let genre of sortedGenre) {
    let songs = genreToSong.get(genre);

    // 재생 횟수가 같으면 고유번호 낮은 노래를 먼저 수록
    songs.sort((a, b) => {
      if (b.play === a.play) {
        return a.id - b.id;
      }
      return b.play - a.play;
    });

    // 베스트 앨범에는 장르별로 베스트 송 2개
    answer.push(songs[0].id);
    if (songs[1]) {
      answer.push(songs[1].id);
    }
  }

  return answer;
}
```

## 시간 복잡도

- 처음 `for`문 : O(n)
- 장르 정렬 : O (g log g) (g 장르 개수)
- 장르별 리스트 정렬 : O(k log k) (해당 장르 노래 수 )
- **∴ O(n log n)**

## 메모

- 현재는 문제를 직관적으로 풀어놓은 상태이고, 모든 노래를 다 정렬하기 때문에 시간복잡도에서 효율성이 떨어진다. 그렇기 때문에 처음부터 상위 두개의 곡을 추출해놓고 풀면 시간복잡도가 줄어들 것 같다! >> 추가적으로 해보겠다!

<!---------------------------------------------------------------------------->

[PRO]: https://github.com/GoSSaChin/algorithm-js/assets/107768516/67c43b52-bc3f-4571-a249-5519021afbb0
[Link]: https://school.programmers.co.kr/learn/courses/30/lessons/42579
